<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head th:replace="~{fragments/common-head :: head-elements(pageTitle='대시보드')}"></head>
<body class="flex flex-col min-h-screen bg-app-light-gray">
<div th:insert="~{fragments/header :: header}"></div>
<div class="flex flex-1 overflow-hidden">
    <aside th:insert="~{fragments/admin-menu :: menu}"></aside>
    <main class="flex-1 p-6 lg:p-8 overflow-y-auto">
        <h1 class="text-3xl font-bold text-app-primary mb-6">대시보드</h1>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <a th:href="@{/admin/workbench(view='subjects')}" class="widget-card">
                <div class="widget-icon bg-blue-100 text-blue-600"></div>
                <p class="widget-title">총 사용자</p>
                <p class="widget-value" th:text="${dashboardData.userCount}">0</p>
            </a>
            <a th:href="@{/admin/workbench(view='subjects')}" class="widget-card">
                <div class="widget-icon bg-green-100 text-green-600"></div>
                <p class="widget-title">총 그룹</p>
                <p class="widget-value" th:text="${dashboardData.groupCount}">0</p>
            </a>
            <a th:href="@{/admin/workbench(view='roles')}" class="widget-card">
                <div class="widget-icon bg-purple-100 text-purple-600"></div>
                <p class="widget-title">총 역할</p>
                <p class="widget-value" th:text="${dashboardData.roleCount}">0</p>
            </a>
            <a href="#" class="widget-card"> <div class="widget-icon bg-yellow-100 text-yellow-600"></div>
                <p class="widget-title">총 정책</p>
                <p class="widget-value" th:text="${dashboardData.policyCount}">0</p>
            </a>
        </div>

        <div class="mt-8 grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-lg">
                <h3 class="font-bold text-lg text-red-600 mb-4">보안 알림</h3>
                <div th:if="${#lists.isEmpty(dashboardData.securityAlerts)}" class="text-slate-500 text-sm">
                    발견된 보안 알림이 없습니다.
                </div>
                <ul th:unless="${#lists.isEmpty(dashboardData.securityAlerts)}" class="space-y-3">
                    <li th:each="alert : ${dashboardData.securityAlerts}" class="flex items-start space-x-3">
                        <div class="flex-shrink-0 mt-1">
                            <span class="h-4 w-4 rounded-full flex items-center justify-center bg-red-500 text-white text-xs">!</span>
                        </div>
                        <div>
                            <p class="text-sm font-semibold text-gray-800" th:text="${alert.message}"></p>
                            <a th:href="@{${alert.link}}" class="text-xs text-app-accent hover:underline">바로가기</a>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg">
                <h3 class="font-bold text-lg text-gray-800 mb-4">최근 활동</h3>
                <div th:if="${#lists.isEmpty(dashboardData.recentActivities)}" class="text-slate-500 text-sm">
                    최근 활동이 없습니다.
                </div>
                <ul th:unless="${#lists.isEmpty(dashboardData.recentActivities)}" class="space-y-4">
                    <li th:each="activity : ${dashboardData.recentActivities}" class="flex items-center text-sm">
                        <span class="text-slate-500 mr-4" th:text="${activity.timestamp}"></span>
                        <span class="text-gray-700" th:text="${activity.activity}"></span>
                    </li>
                </ul>
            </div>
        </div>
    </main>
</div>
<style>
    .widget-card { display: block; background-color: white; padding: 1.5rem; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); transition: all 0.2s ease-in-out; }
    .widget-card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); }
    .widget-icon { width: 3rem; height: 3rem; border-radius: 9999px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; }
    .widget-title { color: #4B5563; font-weight: 500; }
    .widget-value { font-size: 2.25rem; font-weight: 800; color: #1F2937; }
</style>
</body>
</html>